<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Test for cultural dimensions</title>

<style>
  body { font-family: Arial, sans-serif; max-width: 900px; margin: 40px auto; }
  h1, h2 { text-align: center; }
  .question { margin-bottom: 25px; }
  .scale { display: flex; justify-content: space-between; max-width: 500px; margin-top: 5px; }
  .scale label { text-align: center; flex: 1; cursor: pointer; }
  .scale input { display: block; margin: auto; }
  button { padding: 10px 20px; font-size: 16px; }
  #results { margin-top: 40px; }
</style>
</head>

<body>

<h1>Test for cultural dimensions</h1>

<form id="testForm">

  <!-- Pytania z oryginalnymi treściami -->
  <div class="question">
    <p>1. My nation is ... (1 - hopeless, 4 - neutral, 7 - great)</p>
    <div class="scale" data-q="q1"></div>
  </div>

  <div class="question">
    <p>2. I am aggressive and uncompromising.</p>
    <div class="scale" data-q="q2"></div>
  </div>

  <div class="question">
    <p>3. It’s important to give everyone a comfortable life, regardless of their contributions.</p>
    <div class="scale" data-q="q3"></div>
  </div>

  <div class="question">
    <p>4. Domination over others is more important than cooperation.</p>
    <div class="scale" data-q="q4"></div>
  </div>

  <div class="question">
    <p>5. Superiors should take care of their subordinates, who, in turn, owe obedience and loyalty to them.</p>
    <div class="scale" data-q="q5"></div>
  </div>

  <div class="question">
    <p>6. Social inequality is inevitable. There will always be certain people who are more powerful than others.</p>
    <div class="scale" data-q="q6"></div>
  </div>

  <div class="question">
    <p>7. People get their best and most valuable ideas in environments that allow for loose and spontaneous decisions.</p>
    <div class="scale" data-q="q7"></div>
  </div>

  <div class="question">
    <p>8. It is generally better to play it safe than risk the unknown.</p>
    <div class="scale" data-q="q8"></div>
  </div>

  <div class="question">
    <p>9. I am... (1 - combative, 4 - both combative and uncombative the same, 7 - uncombative)</p>
    <div class="scale" data-q="q9"></div>
  </div>

  <div class="question">
    <p>10. Planning often stifles creativity and innovation.</p>
    <div class="scale" data-q="q10"></div>
  </div>

  <div class="question">
    <p>11. People could be able to have everything they need or want if we just let them.</p>
    <div class="scale" data-q="q11"></div>
  </div>

  <div class="question">
    <p>12. I am proud of my own family and tradition or also my own nation.</p>
    <div class="scale" data-q="q12"></div>
  </div>

  <div class="question">
    <p>13. Followers should be expected to obey their leaders without question.</p>
    <div class="scale" data-q="q13"></div>
  </div>

  <div class="question">
    <p>14. To be capable, ... (1 - it is sufficient to be born with a talent, 4 - both one should have a talent and should develop certain skills, 7 - it is sufficient to develop certain skills)</p>
    <div class="scale" data-q="q14"></div>
  </div>

  <div class="question">
    <p>15. When I have a serious disagreement with someone in the group, I will talk about the disagreement... (1 - to nobody, 4 - to only some members of my group, 7 - to all to which I want to talk)</p>
    <div class="scale" data-q="q15"></div>
  </div>

  <div class="question">
    <p>16. Group cohesion is more important than autonomy and uniqueness of a singular person.</p>
    <div class="scale" data-q="q16"></div>
  </div>

  <div class="question">
    <p>17. I strive to continuously improve my results.</p>
    <div class="scale" data-q="q17"></div>
  </div>

  <div class="question">
    <p>18. Regularity is more important than experimentation.</p>
    <div class="scale" data-q="q18"></div>
  </div>

  <div class="question">
    <p>19. Trying to control the future through rules and guidelines is asking for disappointment.</p>
    <div class="scale" data-q="q19"></div>
  </div>

  <div class="question">
    <p>20. I adhere to religion and/or principles of tradition.</p>
    <div class="scale" data-q="q20"></div>
  </div>

  <div class="question">
    <p>21. Subordinates and juniors should be free to speak their minds with regard to what they think of their superiors’ leadership, even if their assessment is a negative one.</p>
    <div class="scale" data-q="q21"></div>
  </div>

  <div class="question">
    <p>22. Group goals are more important than individual goals.</p>
    <div class="scale" data-q="q22"></div>
  </div>

  <div class="question">
    <p>23. It is foolish to seek to do away with inequalities based on social standing and class.</p>
    <div class="scale" data-q="q23"></div>
  </div>

  <div class="question">
    <p>24. I am... (1 - entirely sensitive, 4 - both tough and sensitive the same, 7 - entirely tough)</p>
    <div class="scale" data-q="q24"></div>
  </div>

  <div class="question">
    <p>25. It is very important to have time for fun and relaxation.</p>
    <div class="scale" data-q="q25"></div>
  </div>

  <div class="question">
    <p>26. It is not good for people to get what they need or want if their contributions are not valuable enough to allow it.</p>
    <div class="scale" data-q="q26"></div>
  </div>

  <div class="question">
    <p>27. The future will probably not be very different from the past.</p>
    <div class="scale" data-q="q27"></div>
  </div>

  <div class="question">
    <p>28. I would be worried if an outsider made negative comments about my group.</p>
    <div class="scale" data-q="q28"></div>
  </div>

  <div class="question">
    <p>29. Being consistent should be valued more than being innovative.</p>
    <div class="scale" data-q="q29"></div>
  </div>

  <div class="question">
    <p>30. I am more ambitious and effective than empathetic.</p>
    <div class="scale" data-q="q30"></div>
  </div>

  <div class="question">
    <p>31. Followers should question their leaders when they do not see the reasoning behind the leader’s dictates.</p>
    <div class="scale" data-q="q31"></div>
  </div>

  <div class="question">
    <p>32. Individual goals are more important than group goals.</p>
    <div class="scale" data-q="q32"></div>
  </div>

  <div class="question">
    <p>33. Interdependence is more important than independence.</p>
    <div class="scale" data-q="q33"></div>
  </div>

  <div class="question">
    <p>34. Strict social norms are generally a positive thing for societies.</p>
    <div class="scale" data-q="q34"></div>
  </div>

  <div class="question">
    <p>35. I feel personal bond with my ancestors.</p>
    <div class="scale" data-q="q35"></div>
  </div>

  <div class="question">
    <p>36. People are too obsessed with having a comfortable life as opposed to thinking more about how they could contribute.</p>
    <div class="scale" data-q="q36"></div>
  </div>

  <div style="text-align:center;">
    <button type="submit">Show your results</button>
  </div>

</form>

<div id="results"></div>

<div id="share" style="display:none; text-align:center; margin-top:30px;">
  <h3>Share the result</h3>
  <button onclick="shareFacebook()">Facebook</button>
  <button onclick="shareReddit()">Reddit</button>
  <button onclick="shareNative()">Instagram / TikTok</button>
  <button onclick="copyResult()">Copy the text</button>
</div>

<script>
/* ===== SKALA 1–7 ===== */
document.querySelectorAll(".scale").forEach(el => {
  const q = el.dataset.q;
  el.innerHTML = [1,2,3,4,5,6,7].map(v => `
    <label>
      <input type="radio" name="${q}" value="${v}" required>
      <br>${v}
    </label>`).join("");
});

/* ===== DIMENSIONS & HOFSTEDE LOGIKA ===== */
const dimensions = {
  q1: { name: "Pragmatism", invert: true },
  q2: { name: "Masculinity", invert: false },
  q3: { name: "Indulgence", invert: false },
  q4: { name: "Masculinity", invert: false },
  q5: { name: "Power_distance", invert: false },
  q6: { name: "Power_distance", invert: false },
  q7: { name: "Uncertainty_avoidance", invert: true },
  q8: { name: "Uncertainty_avoidance", invert: false },
  q9: { name: "Masculinity", invert: true },
  q10: { name: "Uncertainty_avoidance", invert: true },
  q11: { name: "Indulgence", invert: false },
  q12: { name: "Pragmatism", invert: true },
  q13: { name: "Power_distance", invert: false },
  q14: { name: "Pragmatism", invert: false },
  q15: { name: "Individualism", invert: false },
  q16: { name: "Individualism", invert: true },
  q17: { name: "Masculinity", invert: false },
  q18: { name: "Uncertainty_avoidance", invert: false },
  q19: { name: "Uncertainty_avoidance", invert: true },
  q20: { name: "Pragmatism", invert: true },
  q21: { name: "Power_distance", invert: true },
  q22: { name: "Individualism", invert: true},
  q23: { name: "Power_distance", invert: false },
  q24: { name: "Masculinity", invert: false },
  q25: { name: "Indulgence", invert: false },
  q26: { name: "Indulgence", invert: true },
  q27: { name: "Pragmatism", invert: true },
  q28: { name: "Individualism", invert: true },
  q29: { name: "Uncertainty_avoidance", invert: false },
  q30: { name: "Masculinity", invert: false },
  q31: { name: "Power_distance", invert: true },
  q32: { name: "Individualism", invert: false },
  q33: { name: "Individualism", invert: true },
  q34: { name: "Indulgence", invert: true },
  q35: { name: "Pragmatism", invert: true },
  q36: { name: "Indulgence", invert: true }
};

const hofstedeRanges = {
  "Power_distance": [2.5, 5.5],
  "Individualism": [1.5, 4.5],
  "Masculinity": [3, 5],
  "Uncertainty_avoidance": [3, 5],
  "Pragmatism": [1.5, 4.5],
  "Indulgence": [1.5, 6]
};

const countries = {
  "Albania": { Power_distance: 90, Individualism: 20, Masculinity: 80, Uncertainty_avoidance: 70, Pragmatism: 56, Indulgence: 15 },
  "Algeria": { Power_distance: 80, Individualism: 35, Masculinity: 35, Uncertainty_avoidance: 70, Pragmatism: 25, Indulgence: 32 },
  "Angola": { Power_distance: 83, Individualism: 18, Masculinity: 20, Uncertainty_avoidance: 60, Pragmatism: 15, Indulgence: 83 },
  "Argentina": { Power_distance: 63, Individualism: 46, Masculinity: 56, Uncertainty_avoidance: 86, Pragmatism: 29, Indulgence: 61 },
  "Armenia": { Power_distance: 85, Individualism: 22, Masculinity: 50, Uncertainty_avoidance: 88, Pragmatism: 38, Indulgence: 25 },
  "Australia": { Power_distance: 38, Individualism: 73, Masculinity: 61, Uncertainty_avoidance: 51, Pragmatism: 56, Indulgence: 71 },
  "Austria": { Power_distance: 11, Individualism: 55, Masculinity: 79, Uncertainty_avoidance: 70, Pragmatism: 60, Indulgence: 63 },
  "Azerbaijan": { Power_distance: 85, Individualism: 22, Masculinity: 50, Uncertainty_avoidance: 88, Pragmatism: 59, Indulgence: 22 },
  "Bangladesh": { Power_distance: 80, Individualism: 5, Masculinity: 55, Uncertainty_avoidance: 60, Pragmatism: 38, Indulgence: 20 },
  "Belgium": { Power_distance: 65, Individualism: 75, Masculinity: 54, Uncertainty_avoidance: 94, Pragmatism: 82, Indulgence: 57 },
  "Bolivia": { Power_distance: 78, Individualism: 10, Masculinity: 42, Uncertainty_avoidance: 87, Pragmatism: 21, Indulgence: 46 },
  "Brazil": { Power_distance: 69, Individualism: 38, Masculinity: 49, Uncertainty_avoidance: 76, Pragmatism: 28, Indulgence: 59 },
  "Bulgaria": { Power_distance: 70, Individualism: 30, Masculinity: 40, Uncertainty_avoidance: 85, Pragmatism: 51, Indulgence: 16 },
  "Burkina Faso": { Power_distance: 80, Individualism: 15, Masculinity: 50, Uncertainty_avoidance: 65, Pragmatism: 27, Indulgence: 18 },
  "Canada": { Power_distance: 39, Individualism: 72, Masculinity: 52, Uncertainty_avoidance: 48, Pragmatism: 54, Indulgence: 68 },
  "Chile": { Power_distance: 49, Individualism: 23, Masculinity: 28, Uncertainty_avoidance: 86, Pragmatism: 31, Indulgence: 68 },
  "China": { Power_distance: 80, Individualism: 20, Masculinity: 50, Uncertainty_avoidance: 69, Pragmatism: 87, Indulgence: 24 },
  "Colombia": { Power_distance: 67, Individualism: 13, Masculinity: 64, Uncertainty_avoidance: 80, Pragmatism: 13, Indulgence: 83 },
  "Croatia": { Power_distance: 73, Individualism: 33, Masculinity: 40, Uncertainty_avoidance: 80, Pragmatism: 58, Indulgence: 33 },
  "Czech Republic": { Power_distance: 57, Individualism: 58, Masculinity: 57, Uncertainty_avoidance: 74, Pragmatism: 70, Indulgence: 29 },
  "Denmark": { Power_distance: 18, Individualism: 87, Masculinity: 16, Uncertainty_avoidance: 23, Pragmatism: 80, Indulgence: 70 },
  "Dominican Republic": { Power_distance: 65, Individualism: 30, Masculinity: 65, Uncertainty_avoidance: 45, Pragmatism: 13, Indulgence: 90 },
  "Egypt": { Power_distance: 80, Individualism: 13, Masculinity: 55, Uncertainty_avoidance: 55, Pragmatism: 22, Indulgence: 0.5 },
  "El Salvador": { Power_distance: 66, Individualism: 14, Masculinity: 40, Uncertainty_avoidance: 94, Pragmatism: 20, Indulgence: 89 },
  "Estonia": { Power_distance: 40, Individualism: 60, Masculinity: 30, Uncertainty_avoidance: 60, Pragmatism: 82, Indulgence: 16 },
  "Ethiopia": { Power_distance: 70, Individualism: 7, Masculinity: 65, Uncertainty_avoidance: 55, Pragmatism: 14, Indulgence: 46 },
  "Finland": { Power_distance: 33, Individualism: 75, Masculinity: 26, Uncertainty_avoidance: 59, Pragmatism: 80, Indulgence: 57 },
  "France": { Power_distance: 68, Individualism: 71, Masculinity: 43, Uncertainty_avoidance: 70, Pragmatism: 63, Indulgence: 48 },
  "Ghana": { Power_distance: 70, Individualism: 15, Masculinity: 40, Uncertainty_avoidance: 55, Pragmatism: 1, Indulgence: 72 },
  "Greece": { Power_distance: 60, Individualism: 59, Masculinity: 57, Uncertainty_avoidance: 100, Pragmatism: 51, Indulgence: 50 },
  "Georgia": { Power_distance: 65, Individualism: 15, Masculinity: 55, Uncertainty_avoidance: 85, Pragmatism: 24, Indulgence: 32 },
  "Hong Kong": { Power_distance: 68, Individualism: 25, Masculinity: 66, Uncertainty_avoidance: 29, Pragmatism: 93, Indulgence: 17 },
  "Hungary": { Power_distance: 71, Individualism: 46, Masculinity: 88, Uncertainty_avoidance: 82, Pragmatism: 45, Indulgence: 31 },
  "India": { Power_distance: 77, Individualism: 26, Masculinity: 56, Uncertainty_avoidance: 40, Pragmatism: 51, Indulgence: 48 },
  "Indonesia": { Power_distance: 78, Individualism: 14, Masculinity: 46, Uncertainty_avoidance: 48, Pragmatism: 29, Indulgence: 38 },
  "Iran": { Power_distance: 80, Individualism: 23, Masculinity: 43, Uncertainty_avoidance: 70, Pragmatism: 30, Indulgence: 14 },
  "Iraq": { Power_distance: 97, Individualism: 25, Masculinity: 53, Uncertainty_avoidance: 96, Pragmatism: 11, Indulgence: 23 },
  "Ireland": { Power_distance: 35, Individualism: 58, Masculinity: 68, Uncertainty_avoidance: 35, Pragmatism: 24, Indulgence: 65 },
  "Israel": { Power_distance: 13, Individualism: 52, Masculinity: 47, Uncertainty_avoidance: 55, Pragmatism: 39, Indulgence: 40 },
  "Italy": { Power_distance: 75, Individualism: 53, Masculinity: 70, Uncertainty_avoidance: 75, Pragmatism: 50, Indulgence: 74 },
  "Japan": { Power_distance: 54, Individualism: 46, Masculinity: 39, Uncertainty_avoidance: 92, Pragmatism: 100, Indulgence: 42 },
  "Jordan": { Power_distance: 70, Individualism: 30, Masculinity: 45, Uncertainty_avoidance: 65, Pragmatism: 20, Indulgence: 43 },
  "Kazakhstan": { Power_distance: 88, Individualism: 20, Masculinity: 50, Uncertainty_avoidance: 88, Pragmatism: 58, Indulgence: 22 },
  "Lebanon": { Power_distance: 62, Individualism: 27, Masculinity: 48, Uncertainty_avoidance: 57, Pragmatism: 47, Indulgence: 10 },
  "Lithuania": { Power_distance: 42, Individualism: 60, Masculinity: 19, Uncertainty_avoidance: 65, Pragmatism: 82, Indulgence: 16 },
  "Luxembourg": { Power_distance: 40, Individualism: 60, Masculinity: 50, Uncertainty_avoidance: 70, Pragmatism: 64, Indulgence: 56 },
  "Latvia": { Power_distance: 44, Individualism: 70, Masculinity: 9, Uncertainty_avoidance: 63, Pragmatism: 69, Indulgence: 13 },
  "Malaysia": { Power_distance: 100, Individualism: 26, Masculinity: 50, Uncertainty_avoidance: 36, Pragmatism: 41, Indulgence: 57 },
  "Morocco": { Power_distance: 70, Individualism: 24, Masculinity: 53, Uncertainty_avoidance: 68, Pragmatism: 25, Indulgence: 25 },
  "Mexico": { Power_distance: 81, Individualism: 30, Masculinity: 69, Uncertainty_avoidance: 82, Pragmatism: 24, Indulgence: 97 },
  "Mongolia": { Power_distance: 93, Individualism: 37, Masculinity: 29, Uncertainty_avoidance: 69, Pragmatism: 50, Indulgence: 42 },
  "Germany": { Power_distance: 35, Individualism: 79, Masculinity: 66, Uncertainty_avoidance: 65, Pragmatism: 83, Indulgence: 40 },
  "Netherlands": { Power_distance: 38, Individualism: 100, Masculinity: 14, Uncertainty_avoidance: 53, Pragmatism: 67, Indulgence: 68 },
  "Nigeria": { Power_distance: 80, Individualism: 30, Masculinity: 60, Uncertainty_avoidance: 55, Pragmatism: 13, Indulgence: 84 },
  "Norway": { Power_distance: 31, Individualism: 81, Masculinity: 8, Uncertainty_avoidance: 50, Pragmatism: 80, Indulgence: 55 },
  "New Zealand": { Power_distance: 22, Individualism: 69, Masculinity: 58, Uncertainty_avoidance: 49, Pragmatism: 55, Indulgence: 75 },
  "Pakistan": { Power_distance: 55, Individualism: 14, Masculinity: 50, Uncertainty_avoidance: 59, Pragmatism: 19, Indulgence: 0.5 },
  "Paraguay": { Power_distance: 70, Individualism: 12, Masculinity: 40, Uncertainty_avoidance: 85, Pragmatism: 20, Indulgence: 56 },
  "Peru": { Power_distance: 64, Individualism: 16, Masculinity: 42, Uncertainty_avoidance: 87, Pragmatism: 5, Indulgence: 46 },
  "Philippines": { Power_distance: 94, Individualism: 32, Masculinity: 64, Uncertainty_avoidance: 44, Pragmatism: 27, Indulgence: 42 },
  "Poland": { Power_distance: 69, Individualism: 60, Masculinity: 64, Uncertainty_avoidance: 93, Pragmatism: 38, Indulgence: 29 },
  "Portugal": { Power_distance: 63, Individualism: 27, Masculinity: 31, Uncertainty_avoidance: 99, Pragmatism: 42, Indulgence: 44 },
  "Puerto Rico": { Power_distance: 68, Individualism: 27, Masculinity: 56, Uncertainty_avoidance: 38, Pragmatism: 0, Indulgence: 90 },
  "Russia": { Power_distance: 93, Individualism: 43, Masculinity: 36, Uncertainty_avoidance: 95, Pragmatism: 58, Indulgence: 20 },
  "Romania": { Power_distance: 90, Individualism: 30, Masculinity: 42, Uncertainty_avoidance: 90, Pragmatism: 32, Indulgence: 20 },
  "Saudi Arabia": { Power_distance: 72, Individualism: 25, Masculinity: 43, Uncertainty_avoidance: 64, Pragmatism: 27, Indulgence: 14 },
  "Serbia": { Power_distance: 86, Individualism: 25, Masculinity: 43, Uncertainty_avoidance: 92, Pragmatism: 52, Indulgence: 28 },
  "Singapore": { Power_distance: 74, Individualism: 20, Masculinity: 48, Uncertainty_avoidance: 8, Pragmatism: 67, Indulgence: 46 },
  "Slovakia": { Power_distance: 71, Individualism: 52, Masculinity: 57, Uncertainty_avoidance: 77, Pragmatism: 51, Indulgence: 28 },
  "Slovenia": { Power_distance: 71, Individualism: 27, Masculinity: 19, Uncertainty_avoidance: 88, Pragmatism: 49, Indulgence: 48 },
  "South Africa": { Power_distance: 49, Individualism: 23, Masculinity: 63, Uncertainty_avoidance: 49, Pragmatism: 18, Indulgence: 63 },
  "South Korea": { Power_distance: 60, Individualism: 18, Masculinity: 95, Uncertainty_avoidance: 85, Pragmatism: 88, Indulgence: 29 },
  "Spain": { Power_distance: 57, Individualism: 51, Masculinity: 42, Uncertainty_avoidance: 86, Pragmatism: 48, Indulgence: 44 },
  "Switzerland": { Power_distance: 34, Individualism: 68, Masculinity: 70, Uncertainty_avoidance: 58, Pragmatism: 74, Indulgence: 66 },
  "Sweden": { Power_distance: 31, Individualism: 87, Masculinity: 5, Uncertainty_avoidance: 29, Pragmatism: 80, Indulgence: 78 },
  "Thailand": { Power_distance: 64, Individualism: 20, Masculinity: 34, Uncertainty_avoidance: 64, Pragmatism: 67, Indulgence: 45 },
  "Taiwan": { Power_distance: 58, Individualism: 17, Masculinity: 45, Uncertainty_avoidance: 69, Pragmatism: 93, Indulgence: 49 },
  "Tanzania": { Power_distance: 70, Individualism: 25, Masculinity: 40, Uncertainty_avoidance: 50, Pragmatism: 34, Indulgence: 38 },
  "Turkey": { Power_distance: 66, Individualism: 37, Masculinity: 45, Uncertainty_avoidance: 85, Pragmatism: 35, Indulgence: 49 },
  "Ukraine": { Power_distance: 65, Individualism: 25, Masculinity: 27, Uncertainty_avoidance: 95, Pragmatism: 51, Indulgence: 14 },
  "Uruguay": { Power_distance: 61, Individualism: 36, Masculinity: 38, Uncertainty_avoidance: 98, Pragmatism: 50, Indulgence: 53 },
  "United Arab Emirates": { Power_distance: 72, Individualism: 36, Masculinity: 52, Uncertainty_avoidance: 66, Pragmatism: 22, Indulgence: 22 },
  "United Kingdom": { Power_distance: 35, Individualism: 76, Masculinity: 66, Uncertainty_avoidance: 35, Pragmatism: 51, Indulgence: 69 },
  "United States": { Power_distance: 40, Individualism: 62, Masculinity: 91, Uncertainty_avoidance: 46, Pragmatism: 50, Indulgence: 68 },
  "Venezuela": { Power_distance: 81, Individualism: 12, Masculinity: 73, Uncertainty_avoidance: 76, Pragmatism: 0, Indulgence: 100 },
  "Vietnam": { Power_distance: 70, Individualism: 20, Masculinity: 40, Uncertainty_avoidance: 65, Pragmatism: 57, Indulgence: 35 },
  "Zambia": { Power_distance: 70, Individualism: 35, Masculinity: 40, Uncertainty_avoidance: 50, Pragmatism: 30, Indulgence: 42 },
 };

function normalize(value, invert) { return invert ? (8 - value) : value; }
function toHofstede(value, dimName) {
  const [min, max] = hofstedeRanges[dimName];
  if(value<min) return "-0"; if(value>max) return "+100";
  return ((value-min)/(max-min)*100).toFixed(2);
}
function culturalDistance(user, country) {
  let sum=0,count=0;
  for(const dim in country){const diff=user[dim]-country[dim];sum+=diff*diff;count++;}
  return Math.sqrt(sum/count);
}
function buildShareText(userHofstede,matches){
  return `
My cultural profile (Hofstede):

Power_distance: ${userHofstede["Power_distance"]}
Individualism: ${userHofstede["Individualism"]}
Masculinity: ${userHofstede["Masculinity"]}
Uncertainty_avoidance: ${userHofstede["Uncertainty_avoidance"]}
Pragmatism: ${userHofstede["Pragmatism"]}
Indulgence: ${userHofstede["Indulgence"]}

Culturally closest countries:
1. ${matches[0].country}
2. ${matches[1].country}
`.trim();
}

let shareText = "";

document.getElementById("testForm").addEventListener("submit", function(e){
  e.preventDefault();
  const formData = new FormData(this);
  const scores = {};

  for(const [q, meta] of Object.entries(dimensions)){
    const raw = parseFloat(formData.get(q));
    const norm = normalize(raw, meta.invert);
    if(!scores[meta.name]) scores[meta.name] = [];
    scores[meta.name].push(norm);
  }

  const userHofstede = {};
  let html = "<h2>Your results (Hofstede 0–100)</h2><ul>";

  for(const dim in scores){
    const avgRaw = scores[dim].reduce((a,b)=>a+b,0)/scores[dim].length;
    const hof = toHofstede(avgRaw, dim);
    const numeric = hof === "-0" ? 0 : hof === "+100" ? 100 : parseFloat(hof);
    userHofstede[dim] = numeric;
    html += `<li><strong>${dim}</strong>: ${numeric}</li>`;
  }
  html += "</ul>";

  const matches = Object.entries(countries)
    .map(([name, profile]) => ({
      country: name,
      distance: culturalDistance(userHofstede, profile)
    }))
    .sort((a,b)=>a.distance-b.distance);

  html += `
  <h2>The closest cultural matching</h2>
  <ol>
    <li><strong>${matches[0].country}</strong></li>
    <li><strong>${matches[1].country}</strong></li>
  </ol>
  `;

  document.getElementById("results").innerHTML = html;
  shareText = buildShareText(userHofstede, matches);
  document.getElementById("share").style.display = "block";
});

/* ===== FUNKCJE UDOSTĘPNIANIA ===== */
function shareFacebook(){
  const url = encodeURIComponent(location.href);
  const quote = encodeURIComponent(shareText);
  window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${quote}`, "_blank");
}

function shareReddit(){
  const url = encodeURIComponent(location.href);
  const title = encodeURIComponent("My cultural profile (Hofstede)");
  const text = encodeURIComponent(shareText);
  window.open(`https://www.reddit.com/submit?url=${url}&title=${title}&text=${text}`, "_blank");
}

function shareNative(){
  if(navigator.share){
    navigator.share({ title:"My cultural profile (Hofstede)", text:shareText });
  } else {
    alert("Your browser doesn't support direct sharing. Please copy the text manually.");
  }
}

function copyResult(){
  navigator.clipboard.writeText(shareText);
  alert("Result copied to clipboard.");
}
</script>

</body>
</html>
